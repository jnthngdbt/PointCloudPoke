# VisualizerApp User Guide

To test if the setup is ok, run this batch file by double clicking on it.

    [...]\package\VisualizerAppTest\test.bat

The VisualizerApp should launch.

## VisualizerApp.exe

The simplest way to use it is to associate PCD files with VisualizerApp.exe (right-click on a PCD file > Properties > Opens with...), located there

    [...]\package\VisualizerApp\VisualizerApp.exe

### Important interactive commands

All commands should be displayed in the console when pressing 'h'. It first shows all original commands available in pcl_viewer_release.exe. The bottom section shows commands specific to VisualizerApp. Following are the most important and useful.

#### PCL builtin

* **r**: Recenters the viewpoint to the centroid of the cloud and scales to view the entire cloud. This should be the first key pressed when you open the viewer and you see nothing.
* **f**: When hovering over a point with the mouse, it centers the viewpoint on that point.
* **numkeys**: Switches color handlers to color the points. Every feature is a color handler. If more than 10, combine with CTRL.
* **l**: List color handlers in the console.
* **o**: Toggle orthogonal/perspective view.
* **u**: Toggle display of the colormap.
  
#### New with VisualizerApp

* **i**: Loop through all clouds and highlight them. The highlighted cloud's name is displayed. Combine with SHIFT to go backwards. Combine with CTRL to exit.
* **left/right arrows**: Navigate through cloud bundles, corresponding to scopes in the code.

## pcl_viewer_release.exe

VisualizerApp is a kind of wrapper over the functionalities of PCL's pcl_viewer_release. All PCD files generated by BFMeasurement are valid PCD files, so they can also be opened in the barebone pcl_viewer_release (if you don't want). The executable is packaged there

    [...]\package\VisualizerApp\pcl_viewer_release.exe

To have a quick access to the viewer, you can create a batch file (e.g. pcd_viewer.bat) having the following line it it

    "[...]\package\VisualizerApp\pcl_viewer_release.exe" %*

and drag and drop a shortcut to the batch file in the quick access section of your Windows toolbar. When you want to visualize one or more PCD files using the pcl_viewer_release.exe, simply select the files and drag'n drop them on the shortcut in the quick access.

This is the help for pcl_viewer_release.exe, so you can add some flags and arguments if wanted. You can paste it in the batch file as reference.

    REM The viewer window provides interactive commands; for help, press 'h' or 'H' from within the window.
    REM Syntax is: C:\Program Files\PCL 1.6.0\bin\pcd_viewer_release.exe <file_name 1..N>.<pcd or vtk> <options>
    REM   where options are:
    REM                      -bc r,g,b                = background color
    REM                      -fc r,g,b                = foreground color
    REM                      -ps X                    = point size (1..64)
    REM                      -opaque X                = rendered point cloud opacity (0..1)
    REM                      -ax n                    = enable on-screen display of XYZ axes and scale them to n
    REM                      -ax_pos X,Y,Z            = if axes are enabled, set their X,Y,Z position in space (default 0,0,0)
    REM                      -cam (*)                 = use given camera settings as initial view
    REM  (*) [Clipping Range / Focal Point / Position / ViewUp / Distance / Field of View Y / Window Size / Window Pos] or use a <filename.cam> that contains the same information.
    REM                      -multiview 0/1           = enable/disable auto-multi viewport rendering (default disabled)
    REM                      -normals 0/X             = disable/enable the display of every Xth point's surface normal as lines (default disabled)
    REM                      -normals_scale X         = resize the normal unit vector size to X (default 0.02)
    REM                      -pc 0/X                  = disable/enable the display of every Xth point's principal curvatures as lines (default disabled)
    REM                      -pc_scale X              = resize the principal curvatures vectors size to X (default 0.02)
    REM (Note: for multiple .pcd files, provide multiple -{fc,ps,opaque} parameters; they will be automatically assigned to the right file)
